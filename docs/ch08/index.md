# 正则解析

## 1. 原理

-   我们要对拿到手的html源代码进行数据解析，以得到我们所需要的标签值／标签属性，这个时候可以直接用强大的**正则表达式**直接对源码文本进行匹配到我们想要的东西.
-   通过正则表达式对源码进行解析即为正则解析.

## 2. 一点点正则的小复习

### 限定符：

-   ?：表示前一个字符可以有0次或1次（0／1）
-   *：表示前一个字符可以有0次或多次（>=0）
-   +：表示前一个字符可以有1次或多次（>=1）
-   {} ：表示前一个字符可以有括号内数字固定的次数范围（ {2，6} = 2~6　{2，} = >=2）

### 或/与运算:

-   (A|B)：匹配A或B，此时A和B也可以为完整的一个正则表达语句．
-   (A&B)：匹配A与B，此时A和B也可以为完整的一个正则表达语句．

### 字符类:

-   [abc]：匹配ａ或ｂ或ｃ，同[a-c].
-   [a-zA-Z]：匹配大小写字母，－表示范围．
-   [^a-z]：匹配非小写字符，＾表示非．

### 元字符:

-   \d：匹配数字字符．

-   \w：匹配单词字符（字母，数字，下划线）．
-   \s：匹配空白字符（tab，blank，enter）．**( 注: d/w/s三个元字符匹配中大写则表示'非' )**

-   \b：出现在首位，表示字符的边界．
-   .  ：任意字符（不包括换行）．
-   ^ ：在行首匹配一个字符（^a）．
-   $ ：在行尾匹配一个字符（a\$） ．

### 贪婪/懒惰匹配:

-   <.+> ：贪婪匹配，匹配首尾为<>的中间尽可能多的字符串．
-   <.+?>：懒惰匹配，匹配首尾为<>的中间尽可能少的字符串．



## 2. 正则的使用

-   在python中正则表达式需要导入第三方库re（内置库）．

-   re.search (pattern, string )：返回第一个查询到的位置．

-   re.findall (pattern, string )：返回所有查询到的字符串列表．

-   re.compile()

    ```py
    pattern = re.compile(r'\d{3}-\d{2}-\d{4}')  # 匹配社会安全号码
    text = "My SSN is 123-45-6789."
    result = pattern.search(text)
    ```

-   re.IGNORECASE 标志：用此标志实现对大小写不敏感的匹配．



## 4. 正则解析的优势和不足

### 优势:

-   简单且灵活，像极了在字符串文本中自由穿行的猴子．
-   非常快速，正则搜索在底层是高度优化的．

### 劣势:

-   不适合复杂的结构化文档，层次结构太多解析困难．
-   调试困难容易出错．
-   不具备语义理解，存在误匹配．
-   可读性差，要用得先背．
